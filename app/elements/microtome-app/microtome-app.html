<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer-ts/polymer-ts.html">

<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../../bower_components/neon-animation/animations/hero-animation.html">
<link rel="import" href="../../bower_components/neon-animation/animations/fade-in-animation.html">
<!-- <link rel="import" href="../../bower_components/neon-animation/neon-animation.html"> -->

<link rel="import" href="../slice-preview/slice-preview.html">
<link rel="import" href="../pv-view/pv-view.html">
<link rel="import" href="../layer-height/layer-height.html">
<link rel="import" href="../shared-animatable/shared-animatable.html">

<link rel="import" href="../../styles/shared-styles.html">

<link rel="import" href="../threejs/threejs.html">


<dom-module id="microtome-app">

  <style include="shared-styles">
    :host #center-content {
      position: relative;
    }

    :host #main {
      overflow: hidden;
    }

    :host #header-overlay {
      position: absolute;
      height: 100px;
      top: 0px;
      left: 0px;
      right: 0px;
      pointer-events: none;
      font-size: var(--paper-font-title);
      /*color: #afafaf;*/
      margin: 25px;
      z-index: 10;
    }

    :host neon-animated-pages,
    :host shared-animatable {
      /*position: relative;*/
    }

    :host #pv-toolbar-overlay,
    :host #sp-toolbar-overlay {
      position: absolute;
      width: 100px;
      top: 0px;
      right: 0px;
      bottom: 0px;
      pointer-events: none;
      /*color: #afafaf;*/
      margin: 25px;
      z-index: 10;
    }

    :host #pv-toolbar-overlay > *,
    :host #sp-toolbar-overlay > * {
      pointer-events: auto;
      margin: 10px;
    }
  </style>

  <template>
    <div id="header-overlay">
      Microtome
    </div>
    <div id="main" class="flex layout horizontal fit">
      <div id="center-content" class="flex layout vertical">
        <neon-animated-pages id="main-pages" selected="0" class="fit">
          <shared-animatable id="sa-pv" class="fit">
            <div id="pv-toolbar-overlay" class="vertical layout start-justified end">
              <paper-fab mini icon="add" title="Add model"></paper-fab>
              <paper-fab mini icon="delete" title="Delete model"></paper-fab>
              <paper-fab mini id="slice-preview-button" icon="maps:layers" title="Preview" on-click="toggleSlicePreview"></paper-fab>
              <paper-fab mini icon="settings" title="Microtome settings"></paper-fab>
              <paper-fab mini icon="file-download" title="Save project"></paper-fab>
            </div>
            <pv-view id="pv-view" disabled$="{{!hideSlicePreview}}" class="fit" scene="[[scene]]"></pv-view>
          </shared-animatable>
          <shared-animatable id="sa-sp" class="fit">
            <div id="sp-toolbar-overlay" class="vertical layout start-justified end">
              <paper-fab mini icon="close" title="Exit slice preview" on-click="toggleSlicePreview"></paper-fab>
              <paper-fab mini class="icon-rotate-270" icon="av:skip-next" title="To End" on-click="sliceEnd"></paper-fab>
              <paper-fab mini class="icon-rotate-270" icon="av:play-arrow" title="Slice Up" on-click="sliceUp"></paper-fab>
              <!-- <paper-fab mini icon="av:play-circle-outline" title="Animate"></paper-fab> -->
              <paper-fab mini class="icon-rotate-90" icon="av:play-arrow" title="Slice Down" on-click="sliceDown"></paper-fab>
              <paper-fab mini class="icon-rotate-270" icon="av:skip-previous" title="To Start" on-click="sliceStart"></paper-fab>
            </div>
            <slice-preview id="slice-preview" disabled$="{{hideSlicePreview}}" xres="{{printerConfig.projector.xRes}}" yres="{{printerConfig.projector.yRes}}" slice-at="[[sliceAt]]" class="fit" scene="[[scene]]"></slice-preview>
          </shared-animatable>
        </neon-animated-pages>
      </div>
    </div>
    </paper-header-panel>
  </template>
</dom-module>
<script src="microtome-app.js"></script>
